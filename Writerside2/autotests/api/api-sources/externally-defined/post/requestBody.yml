schema: # <-- Schema object is now under a parent element. The $ref targets this element.
  type: object
  properties:
    data:
      oneOf:
        - $ref: "#/definitions/SimpleRequest" # Locally defined below
        - $ref: "#/definitions/ExtendedRequest" # Locally defined below
definitions: # <-- We get to keep definitions, it doesn't get included into the parent document.
  SimpleRequest:
    type: object
    properties:
      type:
        type: string
        enum:
          - SimpleRequest
      attributes:
        type: object
  ExtendedRequest:
    type: object
    properties:
      type:
        type: string
        enum:
          - ExtendedRequest
      attributes:
        type: object
        properties:
